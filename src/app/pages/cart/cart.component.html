<div *ngIf="cartList && cartList.length > 0; else emptyCart">
  <div
    class="row rounded border border-secondary mx-4 my-3"
    *ngFor="let item of cartList"
  >
    <ng-container *ngIf="item.product">
      <img
        class="px-0"
        [src]="item.product.imageURL"
        [alt]="item.product.name"
      />
      <div>
        <p class="fs-3 fw-bold mt-3">{{ item.product.name }}</p>
        <div class="row mt-3 flex-column align-items-end text-end">
          <p>Quantità: {{ item.quantity }}</p>
          <p>
            Prezzo totale prodotto: {{ item.product.price * item.quantity | currency : "EUR" }}
          </p>
          <p *ngIf="missingProductIds.includes(item.product.id)">
            Prodotto non più disponibile
          </p>
        </div>
        <div class="row justify-content-around mb-3 fs-3 fw-bold">
          <button
            class="button col-2"
            (click)="incrementQuantity(item)"
            *ngIf="!missingProductIds.includes(item.product.id)"
          >
            +
          </button>
          <button
            class="button col-2"
            *ngIf="
              item.quantity > 1 && !missingProductIds.includes(item.product.id)
            "
            (click)="decrementQuantity(item)"
          >
            -
          </button>
          <button class="button col-2" (click)="removeFromCart(item)">
            <i class="bi bi-trash3-fill"></i>
          </button>
        </div>
      </div>
    </ng-container>
  </div>
  <div class="total-price row flex-column mx-3 align-items-end fs-3 fw-bold">
    <div class="row text-end">
      <p class="col-12">Prezzo totale: {{ totalPrice | currency : "EUR" }}</p>
    </div>

    <div *ngIf="isCompanyUser" class="col-12 row mb-3 justify-content-end">
      <label for="payLater" class="row align-items-center">
        <input
          type="checkbox"
          class="mt-3"
          id="payLater"
          [(ngModel)]="payLater"
        />
        <span class="custom-checkbox me-2"></span>
        Vuoi pagare in futuro?
      </label>
    </div>
  </div>
  <div class="row justify-content-center my-4">
    <button class="button col-5" (click)="createOrder()">
      Conferma ordine
    </button>
  </div>
</div>
<ng-template #emptyCart>
  <div class="row rounded border border-secondary mt-5 text-center mx-5">
    <p class="my-2">Your cart is empty.</p>
  </div>
</ng-template>
